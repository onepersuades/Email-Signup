jQuery(document).ready(function(e){function a(e){var a=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(e)}function i(a){return a=e.trim(a),a=a.replace(" ",""),l=a.length,l>=6&&(regEx=/[a-zA-Z][0-9][a-zA-Z](-| |)[0-9][a-zA-Z][0-9]/,regEx.test(a))?!0:!1}var s=e('input[name="emailsignup_uri"]'),n=e('input[name="emailsignup_post_id"]'),t=e('input[name="emailsignup_email"]'),m=e('input[name="emailsignup_postalcode"]'),u=e('input[name="emailsignup_postalcode_check"]'),o=e('input[name="emailsignup_riding_lookup"]'),p=e('input[name="emailsignup_shortcode_nonce_field"]'),r=e('input[name="emailsignup_submit"]'),d={};e(".emailsignup_form").on("submit",function(l){return l.preventDefault(),r.attr("disabled","disabled"),t.removeClass("danger"),emailsignup_uri=s.val(),d.post_id=n.val(),d.email=t.val(),d.postalcode=m.val(),d.postalcode_check=u.val(),d.riding_lookup=o.val(),d.nonce=p.val(),a(d.email)?u.val()&&(m.removeClass("danger"),!i(d.postalcode))?(m.addClass("danger"),r.removeAttr("disabled"),!1):void e.post(emailsignup_uri,d,function(a){a.success?(t.val(""),m.val(""),e(".emailsignup_msg p").html(a.msg),e(".emailsignup_msg").parent().removeClass("danger").addClass("success").show(),e(".emailsignup_notification").show()):(e(".emailsignup_msg p").html(a.msg),e(".emailsignup_msg").parent().removeClass("success").addClass("danger").show(),e(".emailsignup_notification").show(),submit_field.removeAttr("disabled"))},"json"):(t.addClass("danger"),r.removeAttr("disabled"),!1)})});